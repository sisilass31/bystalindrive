<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self'; style-src 'self' https://cdn.boxicons.com https://unpkg.com https://fonts.googleapis.com 'unsafe-inline'; font-src 'self' https://cdn.boxicons.com https://unpkg.com https://fonts.gstatic.com; img-src 'self' data:; script-src 'self';">
  <meta name="description"
    content="Profil élève BystalinDrive : mettez à jour vos informations personnelles et suivez vos progrès dans vos cours de conduite.">
  <title>Mon profil | Auto-école By Stalindrive</title>
  <link rel="icon" type="image/png" href="../../assets/images/favicon.png" />
  <!-- style -->
  <link rel="stylesheet" href="../../assets/css/style.css">
  <!-- boxicons (icônes) -->
  <link href="https://cdn.boxicons.com/fonts/basic/boxicons.min.css" rel="stylesheet" />
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
</head>

<body>
  <header>
    <nav class="navbar-container">
      <div class="logo-container">
        <a href="../../index.html"><img src="../../assets/images/bystalindrive.avif"
            alt="Logo Auto-école By Stalindrive" /></a>
      </div>
      <!-- Auth buttons / links -->
      <div id="authBtnContainer" class="flex-sidebar"></div>

      <!-- Burger button -->
      <button class="burger gradient-text" id="burgerBtn" aria-label="Ouvrir le menu">
        <i class='bx bx-menu'></i>
      </button>

      <!-- Sidebar -->
      <div class="sidebar" id="sidebar">
        <div id="authBtnContainerSidebar"></div>
      </div>
    </nav>
  </header>

  <main>
    <div class="content-background-pattern heigh-100vh">
      <div class="container profile-container box-shadow-3d">
        <div class="sub-title">
          <h2><i class="bx bxs-user"></i> Mon Profil</h2>
        </div>

        <!-- Infos non modifiables -->
        <div class="profile-info">
          <div class="form-group">
            <label for="firstname">Prénom</label>
            <input type="text" id="firstname" name="firstname" readonly />
          </div>
          <div class="form-group">
            <label for="lastname">Nom</label>
            <input type="text" id="lastname" name="lastname" readonly />
          </div>
        </div>

        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" id="email" name="email" readonly />
        </div>

        <!-- Formulaire modifiable -->
        <form id="profileForm" class="formulaire modal-form" novalidate>
          <div class="form-group password-wrapper">
            <label for="password">Nouveau mot de passe</label>
            <div class="input-icon">
              <input type="password" id="password" name="password" placeholder="Nouveau mot de passe" />
              <i class="bx bx-eye-slash" id="toggleNewPassword" role="button"
                aria-label="Afficher / masquer le mot de passe"></i>
            </div>
          </div>
          <div id="profileMessage" aria-live="polite"></div>

          <div class="form-group password-wrapper">
            <label for="confirmPassword">Confirmer mot de passe</label>
            <div class="input-icon">
              <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirmer mot de passe" />
              <i class="bx bx-eye-slash" id="toggleConfirmPassword" role="button"
                aria-label="Afficher / masquer la confirmation"></i>
            </div>
          </div>
          <div id="profileMatchMessage" class="match-mdp" aria-live="polite"></div>

          <button type="submit" class="delete-button" aria-label="Mettre à jour">Mettre à jour</button>
        </form>

        <!-- Modal ancien mot de passe -->
        <div id="oldPasswordModal" class="modal-overlay" style="display:none;" role="dialog" aria-modal="true"
          aria-hidden="true">
          <div class="modal-content" role="document">
            <div class="form-group password-wrapper">
              <div class="input-icon">
                <input type="password" id="modalOldPassword" placeholder="Ancien mot de passe" />
                <i class="bx bx-eye-slash" id="toggleModalOld" role="button"
                  aria-label="Afficher / masquer l'ancien mot de passe"></i>
              </div>
            </div>
            <div class="modal-actions">
              <button id="modalCancelBtn" class="button-3d" aria-label="Fermer le modal">Annuler</button>
              <button id="modalOkBtn" class="delete-button" aria-label="Confirme">Confirmer</button>
            </div>
          </div>
        </div>

        <!-- Modal global pour messages -->
        <div id="messageModal" class="modal-overlay" style="display:none;" role="dialog" aria-modal="true"
          aria-hidden="true">
          <div class="modal-content" role="document">
            <p id="messageModalContent"></p>
            <div class="modal-actions">
              <button id="messageModalOk" class="button-3d" aria-label="Ferme le modal">OK</button>
            </div>
          </div>
        </div>

      </div>
    </div>
  </main>

  <footer>
    <!-- footer inchangé -->
  </footer>


  <script type="module" src="../../assets/js/profile.js"></script>
  <script type="module" src="../../assets/js/auth.js"></script>
</body>

</html>